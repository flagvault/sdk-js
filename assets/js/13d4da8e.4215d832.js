"use strict";(self.webpackChunkflagvault_sdk_docs=self.webpackChunkflagvault_sdk_docs||[]).push([[807],{5537:(e,n,a)=>{a.d(n,{A:()=>_});var t=a(6540),r=a(4164),l=a(5627),s=a(6347),i=a(372),c=a(604),o=a(1861),u=a(8749);function d(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:a}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:a,attributes:t,default:r}}=e;return{value:n,label:a,attributes:t,default:r}}))}(a);return function(e){const n=(0,o.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,a])}function g(e){let{value:n,tabValues:a}=e;return a.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:a}=e;const r=(0,s.W6)(),l=function(e){let{queryString:n=!1,groupId:a}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:n,groupId:a});return[(0,c.aZ)(l),(0,t.useCallback)((e=>{if(!l)return;const n=new URLSearchParams(r.location.search);n.set(l,e),r.replace({...r.location,search:n.toString()})}),[l,r])]}function f(e){const{defaultValue:n,queryString:a=!1,groupId:r}=e,l=h(e),[s,c]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!g({value:n,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=a.find((e=>e.default))??a[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:l}))),[o,d]=m({queryString:a,groupId:r}),[f,p]=function(e){let{groupId:n}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,l]=(0,u.Dv)(a);return[r,(0,t.useCallback)((e=>{a&&l.set(e)}),[a,l])]}({groupId:r}),v=(()=>{const e=o??f;return g({value:e,tabValues:l})?e:null})();(0,i.A)((()=>{v&&c(v)}),[v]);return{selectedValue:s,selectValue:(0,t.useCallback)((e=>{if(!g({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);c(e),d(e),p(e)}),[d,p,l]),tabValues:l}}var p=a(9136);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=a(4848);function y(e){let{className:n,block:a,selectedValue:t,selectValue:s,tabValues:i}=e;const c=[],{blockElementScrollPositionUntilNextRender:o}=(0,l.a_)(),u=e=>{const n=e.currentTarget,a=c.indexOf(n),r=i[a].value;r!==t&&(o(n),s(r))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const a=c.indexOf(e.currentTarget)+1;n=c[a]??c[0];break}case"ArrowLeft":{const a=c.indexOf(e.currentTarget)-1;n=c[a]??c[c.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":a},n),children:i.map((e=>{let{value:n,label:a,attributes:l}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>{c.push(e)},onKeyDown:d,onClick:u,...l,className:(0,r.A)("tabs__item",v.tabItem,l?.className,{"tabs__item--active":t===n}),children:a??n},n)}))})}function x(e){let{lazy:n,children:a,selectedValue:l}=e;const s=(Array.isArray(a)?a:[a]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===l));return e?(0,t.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==l})))})}function j(e){const n=f(e);return(0,b.jsxs)("div",{className:(0,r.A)("tabs-container",v.tabList),children:[(0,b.jsx)(y,{...n,...e}),(0,b.jsx)(x,{...n,...e})]})}function _(e){const n=(0,p.A)();return(0,b.jsx)(j,{...e,children:d(e.children)},String(n))}},8453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>i});var t=a(6540);const r={},l=t.createContext(r);function s(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(l.Provider,{value:n},e.children)}},8567:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>u,contentTitle:()=>o,default:()=>g,frontMatter:()=>c,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"advanced-usage","title":"Advanced Usage","description":"This guide covers advanced usage patterns and upcoming features for the FlagVault SDK.","source":"@site/docs/advanced-usage.md","sourceDirName":".","slug":"/advanced-usage","permalink":"/docs/advanced-usage","draft":false,"unlisted":false,"editUrl":"https://github.com/flagvault/sdk-js/edit/main/docs-website/docs/advanced-usage.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"API Reference","permalink":"/docs/api-reference"},"next":{"title":"React Integration Guide","permalink":"/docs/integrations/react"}}');var r=a(4848),l=a(8453),s=a(5537),i=a(9329);const c={sidebar_position:3},o="Advanced Usage",u={},d=[{value:"Environment Management",id:"environment-management",level:2},{value:"Feature Flag Caching",id:"feature-flag-caching",level:2},{value:"Graceful Degradation",id:"graceful-degradation",level:2},{value:"React Integration",id:"react-integration",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"advanced-usage",children:"Advanced Usage"})}),"\n","\n",(0,r.jsx)(n.p,{children:"This guide covers advanced usage patterns and upcoming features for the FlagVault SDK."}),"\n",(0,r.jsx)(n.h2,{id:"environment-management",children:"Environment Management"}),"\n",(0,r.jsx)(n.p,{children:"The SDK automatically detects which environment to use based on your API key prefix:"}),"\n",(0,r.jsxs)(s.A,{groupId:"programming-language",children:[(0,r.jsx)(i.A,{value:"js",label:"JavaScript/TypeScript",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Production environment (live data)\nconst prodSdk = new FlagVaultSDK({\n  apiKey: 'live_abc123...' // Automatically uses production\n});\n\n// Test environment (test data)\nconst testSdk = new FlagVaultSDK({\n  apiKey: 'test_xyz789...' // Automatically uses test environment\n});\n"})})}),(0,r.jsx)(i.A,{value:"python",label:"Python",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Production environment (live data)\nprod_sdk = FlagVaultSDK(\n    api_key='live_abc123...'  # Automatically uses production\n)\n\n# Test environment (test data)\ntest_sdk = FlagVaultSDK(\n    api_key='test_xyz789...'  # Automatically uses test environment\n)\n"})})})]}),"\n",(0,r.jsx)(n.p,{children:"This eliminates the need to manually specify environments or base URLs."}),"\n",(0,r.jsx)(n.h2,{id:"feature-flag-caching",children:"Feature Flag Caching"}),"\n",(0,r.jsx)(n.p,{children:"For high-performance applications, you may want to implement client-side caching to reduce API calls:"}),"\n",(0,r.jsxs)(s.A,{groupId:"programming-language",children:[(0,r.jsx)(i.A,{value:"js",label:"JavaScript/TypeScript",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"class CachedFlagVaultSDK extends FlagVaultSDK {\n  private cache: Map<string, { value: boolean; timestamp: number }> = new Map();\n  private cacheTTL: number; // milliseconds\n\n  constructor(config: FlagVaultSDKConfig, cacheTTL = 60000) { // default 1 minute\n    super(config);\n    this.cacheTTL = cacheTTL;\n  }\n\n  async isEnabled(flagId: string): Promise<boolean> {\n    // Check cache first\n    const cachedValue = this.cache.get(flagId);\n    const now = Date.now();\n    \n    if (cachedValue && now - cachedValue.timestamp < this.cacheTTL) {\n      return cachedValue.value;\n    }\n    \n    // Cache miss or expired, fetch from API\n    const value = await super.isEnabled(flagId);\n    \n    // Update cache\n    this.cache.set(flagId, { value, timestamp: now });\n    \n    return value;\n  }\n\n  clearCache() {\n    this.cache.clear();\n  }\n}\n"})})}),(0,r.jsx)(i.A,{value:"python",label:"Python",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import time\nfrom typing import Dict, Tuple, Optional\n\nclass CachedFlagVaultSDK(FlagVaultSDK):\n    """FlagVault SDK with caching support"""\n    \n    def __init__(self, api_key: str, timeout: int = 10, cache_ttl: int = 60):\n        super().__init__(api_key, timeout)\n        self.cache: Dict[str, Tuple[bool, float]] = {}\n        self.cache_ttl = cache_ttl  # seconds\n    \n    def is_enabled(self, flag_key: str, default_value: bool = False) -> bool:\n        # Check cache first\n        if flag_key in self.cache:\n            value, timestamp = self.cache[flag_key]\n            if time.time() - timestamp < self.cache_ttl:\n                return value\n        \n        # Cache miss or expired, fetch from API\n        value = super().is_enabled(flag_key, default_value)\n        \n        # Update cache\n        self.cache[flag_key] = (value, time.time())\n        \n        return value\n    \n    def clear_cache(self, flag_key: Optional[str] = None):\n        """Clear cache for specific flag or all flags"""\n        if flag_key:\n            self.cache.pop(flag_key, None)\n        else:\n            self.cache.clear()\n'})})})]}),"\n",(0,r.jsx)(n.h2,{id:"graceful-degradation",children:"Graceful Degradation"}),"\n",(0,r.jsxs)(s.A,{groupId:"programming-language",children:[(0,r.jsxs)(i.A,{value:"js",label:"JavaScript/TypeScript",default:!0,children:[(0,r.jsx)(n.p,{children:"When dealing with potentially unreliable network conditions, you might want to implement a fallback strategy:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"async function checkFeatureWithFallback(\n  sdk: FlagVaultSDK, \n  flagKey: string, \n  defaultValue = false,\n  timeout = 2000\n): Promise<boolean> {\n  try {\n    // Create a promise that rejects after the timeout\n    const timeoutPromise = new Promise<boolean>((_, reject) => {\n      setTimeout(() => reject(new Error('Request timed out')), timeout);\n    });\n    \n    // Race the actual API call against the timeout\n    return await Promise.race([\n      sdk.isEnabled(flagKey),\n      timeoutPromise\n    ]);\n  } catch (error) {\n    console.warn(`Error checking flag '${flagKey}', using fallback value:`, error);\n    return defaultValue;\n  }\n}\n\n// Usage\nconst isEnabled = await checkFeatureWithFallback(sdk, 'my-feature', false, 3000);\n"})})]}),(0,r.jsxs)(i.A,{value:"python",label:"Python",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Python SDK v1.1.0+ includes built-in graceful degradation!"})," The SDK automatically returns the default value on any error without raising exceptions:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# No try/catch needed - errors are handled gracefully\nis_enabled = sdk.is_enabled('my-feature', default_value=False)\n\n# On network error, you'll see:\n# FlagVault: Failed to connect to API for flag 'my-feature', using default: False\n\n# On authentication error:\n# FlagVault: Invalid API credentials for flag 'my-feature', using default: False\n\n# On missing flag:\n# FlagVault: Flag 'my-feature' not found, using default: False\n"})}),(0,r.jsx)(n.p,{children:"For custom timeout handling:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import signal\nfrom contextlib import contextmanager\n\n@contextmanager\ndef timeout(seconds):\n    """Custom timeout context manager"""\n    def signal_handler(signum, frame):\n        raise TimeoutError("Request timed out")\n    \n    # Set the signal handler and alarm\n    signal.signal(signal.SIGALRM, signal_handler)\n    signal.alarm(seconds)\n    \n    try:\n        yield\n    finally:\n        signal.alarm(0)  # Disable alarm\n\n# Usage with custom timeout\ntry:\n    with timeout(2):  # 2 second timeout\n        is_enabled = sdk.is_enabled(\'my-feature\', default_value=False)\nexcept TimeoutError:\n    print("Custom timeout reached")\n    is_enabled = False\n'})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"react-integration",children:"React Integration"}),"\n",(0,r.jsxs)(n.p,{children:["For React integration, including built-in hooks (",(0,r.jsx)(n.code,{children:"useFeatureFlag"}),", ",(0,r.jsx)(n.code,{children:"useFeatureFlagCached"}),") and comprehensive examples, see the ",(0,r.jsx)(n.a,{href:"/docs/integrations/react",children:"React Integration Guide"}),"."]})]})}function g(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},9329:(e,n,a)=>{a.d(n,{A:()=>s});a(6540);var t=a(4164);const r={tabItem:"tabItem_Ymn6"};var l=a(4848);function s(e){let{children:n,hidden:a,className:s}=e;return(0,l.jsx)("div",{role:"tabpanel",className:(0,t.A)(r.tabItem,s),hidden:a,children:n})}}}]);